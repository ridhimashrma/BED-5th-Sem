<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recipe App</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #fff2e6;
}

/* Navbar */
header {
    background: #ff6600;
    color: #fff;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
header h1 { margin: 0; font-size: 1.5rem; }
nav { display: flex; gap: 10px; }
nav button {
    background: #fff;
    color: #ff6600;
    border: none;
    border-radius: 20px;
    padding: 8px 16px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
}
nav button:hover { background: #333; color: #fff; }

/* Containers */
.container {
    width: 90%;
    max-width: 800px;
    margin: 40px auto;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}
h2 { text-align: center; color: #ff6600; margin-bottom: 20px; }

input, button, textarea {
    width: 100%;
    padding: 10px;
    margin: 5px 0 15px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
}
button {
    background: #ff6600;
    color: #fff;
    border: none;
    cursor: pointer;
}
button:hover { background: #e65c00; }

.hidden { display: none; }

.recipe-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.recipe-box {
    background: #fff2e6;
    border: 1px solid #ffcc99;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    transition: transform 0.2s;
}
.recipe-box:hover { transform: scale(1.03); }
.recipe-box img {
    width: 100%;
    height: 150px;
    object-fit: cover;
}
.recipe-content { padding: 10px; }
.recipe-content h4 { margin: 0 0 10px 0; color: #ff6600; }
</style>
</head>
<body>

<!-- Navbar -->
<header>
  <h1>üç≤ Recipe App</h1>
  <nav id="navbar">
    <button onclick="showSection('register-section')">Register</button>
    <button onclick="showSection('login-section')">Login</button>
  </nav>
</header>

<!-- Register Section -->
<div class="container" id="register-section">
    <h2>Register</h2>
    <input type="text" id="reg-username" placeholder="Username">
    <input type="password" id="reg-password" placeholder="Password">
    <button onclick="registerUser()">Register</button>
</div>

<!-- Login Section -->
<div class="container hidden" id="login-section">
    <h2>Login</h2>
    <input type="text" id="login-username" placeholder="Username">
    <input type="password" id="login-password" placeholder="Password">
    <button onclick="loginUser()">Login</button>
</div>

<!-- Add Recipe Section -->
<div class="container hidden" id="add-recipe-section">
    <h2>Add Recipe</h2>
    <input type="text" id="recipe-name" placeholder="Recipe Name">
    <textarea id="recipe-ingredients" placeholder="Ingredients (comma separated)"></textarea>
    <textarea id="recipe-instructions" placeholder="Instructions"></textarea>
    <input type="text" id="recipe-image" placeholder="Image URL (optional)">
    <button onclick="addRecipe()">Add Recipe</button>
</div>

<!-- Recipe Dashboard Section -->
<div class="container hidden" id="dashboard-section">
    <h2>Recipe Dashboard</h2>
    <input type="text" id="search-ingredient" class="search-input" placeholder="Search by ingredient" onkeyup="searchRecipe()">
    <div class="recipe-grid" id="recipe-list"></div>
</div>

<script>
// --- Users and Recipes ---
let users = [];
let currentUser = null;
let recipes = [
    {
        name: 'Pasta Alfredo',
        ingredients: ['pasta', 'cream', 'cheese'],
        instructions: 'Boil pasta. Mix with cream and cheese.',
        image: 'https://richanddelish.com/wp-content/uploads/2023/02/creamy-pesto-pasta-9-of-15.jpg'
    },
    {
        name: 'Chocolate Cake',
        ingredients: ['flour', 'cocoa', 'sugar', 'eggs'],
        instructions: 'Mix ingredients and bake at 180¬∞C for 30 minutes.',
        image: 'https://www.mybakingaddiction.com/wp-content/uploads/2011/10/lr-0939.jpg'
    },
    {
        name: 'Caesar Salad',
        ingredients: ['lettuce', 'croutons', 'parmesan', 'dressing'],
        instructions: 'Mix all ingredients in a bowl.',
        image: 'https://natashaskitchen.com/wp-content/uploads/2019/01/Caesar-Salad-Recipe-3.jpg'
    }
];

// --- Helper: Show Section ---
function showSection(sectionId) {
    document.querySelectorAll('.container').forEach(sec => sec.classList.add('hidden'));
    document.getElementById(sectionId).classList.remove('hidden');
}

// --- Update Navbar After Login ---
function updateNavbar() {
    const navbar = document.getElementById('navbar');
    navbar.innerHTML = '';
    const addBtn = document.createElement('button');
    addBtn.innerText = 'Add Recipe';
    addBtn.onclick = () => showSection('add-recipe-section');
    navbar.appendChild(addBtn);
}

// --- Register ---
function registerUser() {
    const username = document.getElementById('reg-username').value;
    const password = document.getElementById('reg-password').value;
    if(!username || !password) { alert('Enter username and password'); return; }
    if(users.find(u => u.username === username)) { alert('Username already exists'); return; }
    users.push({username, password});
    alert('Registration successful! Please login.');
    showSection('login-section');
}

// --- Login ---
function loginUser() {
    const username = document.getElementById('login-username').value;
    const password = document.getElementById('login-password').value;
    const user = users.find(u => u.username === username && u.password === password);
    if(user) {
        currentUser = user;
        alert('Login successful!');
        updateNavbar();
        showSection('dashboard-section');
        displayRecipes();
    } else { alert('Invalid username or password'); }
}

// --- Add Recipe ---
function addRecipe() {
    const name = document.getElementById('recipe-name').value;
    const ingredients = document.getElementById('recipe-ingredients').value.split(',').map(i => i.trim());
    const instructions = document.getElementById('recipe-instructions').value;
    const image = document.getElementById('recipe-image').value || 'https://cdn-icons-png.flaticon.com/512/3075/3075977.png';
    if(!name || ingredients.length === 0 || !instructions) { alert('Please fill all fields.'); return; }
    recipes.push({name, ingredients, instructions, image});
    document.getElementById('recipe-name').value = '';
    document.getElementById('recipe-ingredients').value = '';
    document.getElementById('recipe-instructions').value = '';
    document.getElementById('recipe-image').value = '';
    showSection('dashboard-section');
    displayRecipes();
}

// --- Display Recipes ---
function displayRecipes(list = null) {
    const container = document.getElementById('recipe-list');
    container.innerHTML = '';
    const data = list || recipes;
    if(data.length === 0) { container.innerHTML = '<p style="text-align:center; color:#666;">No recipes found.</p>'; return; }
    data.forEach(r => {
        const box = document.createElement('div');
        box.className = 'recipe-box';
        box.innerHTML = `
            <img src="${r.image}" alt="Recipe Image">
            <div class="recipe-content">
                <h4>${r.name}</h4>
                <strong>Ingredients:</strong> ${r.ingredients.join(', ')}<br>
                <strong>Instructions:</strong> ${r.instructions}
                <div style="margin-top:10px; display:flex; gap:5px;">
                    <button onclick="editRecipeObj('${r.name}')" style="flex:1; background:#ffcc00;">Edit</button>
                    <button onclick="deleteRecipeObj('${r.name}')" style="flex:1; background:#ff3300;">Delete</button>
                </div>
            </div>
        `;
        container.appendChild(box);
    });
}

// --- Delete Recipe ---
function deleteRecipeObj(name) {
    const index = recipes.findIndex(r => r.name === name);
    if(index !== -1 && confirm('Are you sure you want to delete this recipe?')) {
        recipes.splice(index,1);
        displayRecipes();
    }
}

// --- Edit Recipe ---
function editRecipeObj(name) {
    const index = recipes.findIndex(r => r.name === name);
    if(index !== -1) {
        const r = recipes[index];
        showSection('add-recipe-section');
        document.getElementById('recipe-name').value = r.name;
        document.getElementById('recipe-ingredients').value = r.ingredients.join(', ');
        document.getElementById('recipe-instructions').value = r.instructions;
        document.getElementById('recipe-image').value = r.image;
        const btn = document.querySelector('#add-recipe-section button');
        btn.innerText = 'Update Recipe';
        btn.onclick = function() { updateRecipe(index); }
    }
}

// --- Update Recipe ---
function updateRecipe(index) {
    const name = document.getElementById('recipe-name').value;
    const ingredients = document.getElementById('recipe-ingredients').value.split(',').map(i => i.trim());
    const instructions = document.getElementById('recipe-instructions').value;
    const image = document.getElementById('recipe-image').value || 'https://cdn-icons-png.flaticon.com/512/3075/3075977.png';
    if(!name || ingredients.length === 0 || !instructions) { alert('Please fill all fields.'); return; }
    recipes[index] = {name, ingredients, instructions, image};
    document.getElementById('recipe-name').value = '';
    document.getElementById('recipe-ingredients').value = '';
    document.getElementById('recipe-instructions').value = '';
    document.getElementById('recipe-image').value = '';
    const btn = document.querySelector('#add-recipe-section button');
    btn.innerText = 'Add Recipe';
    btn.onclick = addRecipe;
    showSection('dashboard-section');
    displayRecipes();
}

// --- Search by Ingredient ---
function searchRecipe() {
    const query = document.getElementById('search-ingredient').value.toLowerCase().trim();
    if(!query) { displayRecipes(); return; }
    const filtered = recipes.filter(r => r.ingredients.some(i => i.toLowerCase().includes(query)));
    displayRecipes(filtered);
}
</script>

</body>
</html>